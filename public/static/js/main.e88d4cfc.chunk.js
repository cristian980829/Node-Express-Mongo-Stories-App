(this.webpackJsonphistorys=this.webpackJsonphistorys||[]).push([[0],{332:function(e,t,n){},333:function(e,t,n){},334:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(23),s=n.n(c),i=n(15),o=n(34),l=n(27),u=n(24),j=n.n(u),d=n(20),b=n.n(d),O=n(25),h="https://stories-react-app.herokuapp.com/api",m=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(h,"/").concat(e);return"GET"===n?fetch(a):fetch(a,{method:n,headers:{"Content-type":"application/json"},body:JSON.stringify(t)})},p=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"GET",a="".concat(h,"/").concat(e),r=localStorage.getItem("token")||"";return"GET"===n?fetch(a,{method:n,headers:{"x-token":r}}):fetch(a,{method:n,headers:{"Content-type":"application/json","x-token":r},body:JSON.stringify(t)})},f="[ui] Open user modal",x="[ui] Close user modal",v="[ui] Open storie modal",g="[ui] Close storie modal",y="[ui] Modal View Model",w="[ui] Modal Edit Model",k="[ui] Open Show Success Message",C="[ui] Open Show Error Message",S="[ui] Close Show Message",I="[ui] Show Loading",_="[user] User Set Active",N="[user] Clear active user",E="[user] User Url Upload",M="[user] User Uploaded Image",U="[user] User End Uploaded Image",D="[user] User Update Active User",T="[user] User Get Users",F="[storie] Set Active",A="[storie] Logout storie",B="[storie] Add new",P="[storie] Clear active storie",V="[storie] Storie updated",W="[storie] Storie deleted",L="[storie] Stories loaded",q="[storie] Storie  Add Image",R="[storie] Storie Remove Image",z="[storie] Storie Valid Images",G="[storie] Storie Clear Images",Y="[storie] Storie Remove One Image",H="[auth] Finish checking login state",J="[auth] Login",X="[auth] Logout",K="[auth] Set server error",Z="[auth] User Updated",Q=n(19),$=n(8),ee=n(178),te=function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.cloudinary.com/v1_1/dcsutpqkl/upload",(n=new FormData).append("upload_preset","stories-app"),n.append("file",t),e.prev=4,e.next=7,fetch("https://api.cloudinary.com/v1_1/dcsutpqkl/upload",{method:"POST",body:n});case 7:if(!(a=e.sent).ok){e.next=15;break}return e.next=11,a.json();case 11:return r=e.sent,e.abrupt("return",r.secure_url);case 15:return e.abrupt("return",null);case 16:e.next=21;break;case 18:throw e.prev=18,e.t0=e.catch(4),e.t0;case 21:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),ne=function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a,r,c,s;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.prev=1,a=Object(ee.a)(t),e.prev=3,a.s();case 5:if((r=a.n()).done){e.next=13;break}return c=r.value,e.next=9,te(c);case 9:s=e.sent,n=[].concat(Object(Q.a)(n),[s]);case 11:e.next=5;break;case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(3),a.e(e.t0);case 18:return e.prev=18,a.f(),e.finish(18);case 21:return e.abrupt("return",n);case 24:e.prev=24,e.t1=e.catch(1),console.log(e.t1);case 27:case"end":return e.stop()}}),e,null,[[1,24],[3,15,18,21]])})));return function(t){return e.apply(this,arguments)}}(),ae=n(65),re=n.n(ae),ce=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return Object($.a)(Object($.a)({},e),{},{registration_date:re()(e.registration_date).toDate()})}))},se=function(){return{type:v}},ie=function(){return{type:g}},oe=function(){return{type:y}},le=function(){return{type:w}},ue=function(){return{type:f}},je=function(e){return{type:k,payload:e}},de=function(e){return{type:C,payload:e}},be=function(e){return{type:I,payload:e}},Oe=function(e,t){return function(){var n=Object(O.a)(b.a.mark((function n(a,r){var c,s,i,o,l,u;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c=r().auth.user,s=c.uid,i=c.name,n.prev=1,n.next=4,ne(t);case 4:return o=n.sent,e=Object($.a)(Object($.a)({},e),{},{urlImages:o}),n.next=8,p("stories",e,"POST");case 8:return l=n.sent,n.next=11,l.json();case 11:(u=n.sent).ok?(e._id=u.storie._id,e.user={_id:s,name:i},a(he(e)),a(me()),a(je("Successfully Created!"))):(a(de(u.msg)),a(me())),n.next=20;break;case 15:n.prev=15,n.t0=n.catch(1),a(me()),a(de("An error ocurred!")),console.log(n.t0);case 20:case"end":return n.stop()}}),n,null,[[1,15]])})));return function(e,t){return n.apply(this,arguments)}}()},he=function(e){return{type:B,payload:e}},me=function(){return{type:G}},pe=function(e,t){return function(){var n=Object(O.a)(b.a.mark((function n(a){var r,c,s;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ne(t);case 3:return r=n.sent,e=Object($.a)(Object($.a)({},e),{},{urlImages:[].concat(Object(Q.a)(e.urlImages),Object(Q.a)(r))}),n.next=7,p("stories/".concat(e._id),e,"PUT");case 7:return c=n.sent,n.next=10,c.json();case 10:(s=n.sent).ok?(a(fe(e)),a(je("Successfully Updated!")),a(me())):(a(de(s.msg)),a(me())),n.next=19;break;case 14:n.prev=14,n.t0=n.catch(0),a(de("An error ocurred!")),a(me()),console.log(n.t0);case 19:case"end":return n.stop()}}),n,null,[[0,14]])})));return function(e){return n.apply(this,arguments)}}()},fe=function(e){return{type:V,payload:e}},xe=function(){return{type:W}},ve=function(e){return{type:F,payload:e}},ge=function(){return function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("stories");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=ce(a.stories),t(ye(r)),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),j.a.fire("Error","There was an error connecting to the server","error");case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()},ye=function(e){return{type:L,payload:e}},we=function(e){return{type:q,payload:e}},ke=function(e){return{type:z,payload:e}},Ce=function(){return{type:K}},Se=function(e){return{type:J,payload:e}},Ie=function(){return{type:H}},_e=function(){return function(e){localStorage.clear(),e({type:A}),e(Ne())}},Ne=function(){return{type:X}},Ee=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(){var n=Object(O.a)(b.a.mark((function n(a){var r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,p("user",e,"PUT");case 3:return r=n.sent,n.next=6,r.json();case 6:(c=n.sent).ok?(t&&a(Me(e)),a(je("Successfully Updated!"))):a(de(c.msg)),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.log(n.t0),a(de("An error ocurred!"));case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(e){return n.apply(this,arguments)}}()},Me=function(e){return{type:Z,payload:e}},Ue=n(16),De=n(427),Te=n(428),Fe=n(398),Ae=n(429),Be=n(399),Pe=n(182),Ve=n.n(Pe),We=n(434),Le=n(433),qe=n(426),Re=n(420),ze=n(400),Ge=n(185),Ye=n.n(Ge),He=n(435),Je=n(437),Xe=n(184),Ke=n.n(Xe),Ze=n(183),Qe=n.n(Ze),$e=n(436),et=n(114),tt=n.n(et),nt=n(1),at=function(e){return Object(nt.jsxs)(We.a,Object($.a)(Object($.a)({variant:"body2",color:"text.secondary",align:"center"},e),{},{children:["Copyright \xa9 ","Cristian Morales - ",(new Date).getFullYear(),"."]}))},rt=n(4),ct=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(a.useState)(e),n=Object(Ue.a)(t,2),r=n[0],c=n[1],s=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e;c(t)},i=function(e){var t=e.target;c(Object($.a)(Object($.a)({},r),{},Object(rt.a)({},t.name,t.value)))};return[r,i,s]},st=n(150),it=Object(st.a)({palette:{primary:{main:"#3f51b5"},danger:{main:"#ba000d"}}}),ot=function(){var e=Object(i.b)(),t=Object(a.useState)(""),n=Object(Ue.a)(t,2),r=n[0],c=n[1],s=Object(a.useState)({showPassword:!1}),l=Object(Ue.a)(s,2),u=l[0],d=l[1],h=ct({email:"admin@gmail.com",password:"123456"}),p=Object(Ue.a)(h,2),f=p[0],x=p[1],v=f.email,g=f.password,y=function(){return tt.a.isEmail(v)?g.length<6?(c("Password should be at least 6 characters"),!1):(c(""),!0):(c("Email is not valid"),!1)};return Object(nt.jsx)("div",{className:"animate__animated animate__fadeIn",children:Object(nt.jsx)(qe.a,{theme:it,children:Object(nt.jsxs)(Le.a,{component:"main",maxWidth:"xs",children:[Object(nt.jsx)(Fe.a,{}),Object(nt.jsxs)(Be.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(nt.jsx)(De.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(nt.jsx)(Ve.a,{})}),Object(nt.jsx)(We.a,{component:"h1",variant:"h5",children:"Sign In"}),Object(nt.jsxs)(Be.a,{component:"form",onSubmit:function(t){t.preventDefault(),y()&&e(function(e,t){return function(){var n=Object(O.a)(b.a.mark((function n(a){var r,c;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return j.a.fire({text:"Wait...",showConfirmButton:!1,allowOutsideClick:!1}),j.a.showLoading(),n.prev=2,n.next=5,m("auth",{email:e,password:t},"POST");case 5:return r=n.sent,n.next=8,r.json();case 8:(c=n.sent).ok?(localStorage.setItem("token",c.token),localStorage.setItem("token-init-date",(new Date).getTime()),a(Se({uid:c.uid,name:c.name,email:c.email,urlimage:c.urlimage,rol:c.rol})),j.a.close()):(j.a.close(),j.a.fire("Error",c.msg,"error")),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(2),j.a.close(),j.a.fire("Error","There was an error connecting to the server","error");case 16:case"end":return n.stop()}}),n,null,[[2,12]])})));return function(e){return n.apply(this,arguments)}}()}(v,g))},noValidate:!0,sx:{mt:1},children:[r&&Object(nt.jsx)(ze.a,{sx:{width:"100%"},spacing:2,children:Object(nt.jsx)(Re.a,{severity:"error",children:r})}),Object(nt.jsx)($e.a,{autoComplete:"off",value:v,onChange:x,name:"email",placeholder:"Email",required:!0,fullWidth:!0,autoFocus:!0}),Object(nt.jsx)($e.a,{autoComplete:"off",type:u.showPassword?"text":"password",value:g,onChange:x,name:"password",placeholder:"Passsword",required:!0,fullWidth:!0,endAdornment:Object(nt.jsx)(Je.a,{position:"end",children:Object(nt.jsx)(He.a,{"aria-label":"toggle password visibility",onClick:function(){d(Object($.a)(Object($.a)({},u),{},{showPassword:!u.showPassword}))},onMouseDown:function(e){e.preventDefault()},children:u.showPassword?Object(nt.jsx)(Qe.a,{}):Object(nt.jsx)(Ke.a,{})})})}),Object(nt.jsx)(Te.a,{startIcon:Object(nt.jsx)(Ye.a,{}),type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign In"}),Object(nt.jsx)(Ae.a,{container:!0,children:Object(nt.jsx)(Ae.a,{item:!0,children:Object(nt.jsx)(o.b,{to:"/auth/signup",className:"link",children:"Don't have an account? Sign Up"})})})]})]}),Object(nt.jsx)(at,{sx:{mt:8,mb:4}})]})})})},lt=n(186),ut=n.n(lt),jt=n(116),dt=n.n(jt),bt=n(149),Ot=n.n(bt),ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return function(){var t=Object(O.a)(b.a.mark((function t(n,a){var r,c,s,i;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,null!==e){t.next=8;break}delete(r=a().auth.user).checking,delete r.serverError,n(mt(r)),t.next=16;break;case 8:return t.next=10,p("user/".concat(e));case 10:return c=t.sent,t.next=13,c.json();case 13:s=t.sent,i=s.user,n(mt(i));case 16:t.next=21;break;case 18:t.prev=18,t.t0=t.catch(0),j.a.fire("Error","There was an error connecting to the server","error");case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e,n){return t.apply(this,arguments)}}()},mt=function(e){return{type:_,payload:e}},pt=function(){return{type:N}},ft=function(e){return function(){var t=Object(O.a)(b.a.mark((function t(n){var a,r;return b.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p("user/password",e,"PUT");case 3:return a=t.sent,t.next=6,a.json();case 6:(r=t.sent).ok?n(je("Successfully Updated!")):(n(de(r.msg)),console.log("error: ",r.msg)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log(t.t0),n(de("An error ocurred!"));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}()},xt=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(){var n=Object(O.a)(b.a.mark((function n(a){var r;return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,te(e);case 3:r=n.sent,a(vt(r,t)),a(yt()),n.next=12;break;case 8:n.prev=8,n.t0=n.catch(0),a(yt()),console.log(n.t0);case 12:case"end":return n.stop()}}),n,null,[[0,8]])})));return function(e){return n.apply(this,arguments)}}()},vt=function(e,t){return{type:E,payload:{urlimage:e,name:t}}},gt=function(){return{type:M}},yt=function(){return{type:U}},wt=function(e){return{type:D,payload:e}},kt=function(e){return{type:T,payload:e}},Ct=function(){var e=Object(a.useRef)(),t=Object(i.b)(),n=Object(i.c)((function(e){return e.user})),r=n.uploadedImage,c=n.activeUser.urlimage,s=Object(a.useState)(""),l=Object(Ue.a)(s,2),u=l[0],d=l[1],h=ct({email:"",password:"",password2:"",name:""}),p=Object(Ue.a)(h,2),f=p[0],x=p[1],v=f.email,g=f.name,y=f.password,w=f.password2,k=function(e){e.preventDefault(),S()&&(t(function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"https://res.cloudinary.com/dcsutpqkl/image/upload/v1637987410/blobn0igehlr4fxzfqet.png";return function(){var r=Object(O.a)(b.a.mark((function r(c){var s,i;return b.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return j.a.fire({text:"Wait...",showConfirmButton:!1,allowOutsideClick:!1}),j.a.showLoading(),r.prev=2,r.next=5,m("auth/new",{email:e,password:t,name:n,urlimage:a},"POST");case 5:return s=r.sent,r.next=8,s.json();case 8:(i=r.sent).ok?(localStorage.setItem("token",i.token),localStorage.setItem("token-init-date",(new Date).getTime()),c(Se({uid:i.uid,name:i.name,email:i.email,urlimage:i.urlimage,rol:i.rol})),j.a.close()):(j.a.close(),j.a.fire("Error",i.msg,"error")),r.next=16;break;case 12:r.prev=12,r.t0=r.catch(2),j.a.close(),j.a.fire("Error","There was an error connecting to the server","error");case 16:case"end":return r.stop()}}),r,null,[[2,12]])})));return function(e){return r.apply(this,arguments)}}()}(v,y,g,c)),t(pt()))},C=function(){var e=Object(O.a)(b.a.mark((function e(n){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t(gt()),(a=n.target.files[0])&&t(xt(a));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){return tt.a.isEmail(v)?0===g.trim().length?(d("Name is required"),!1):y!==w||y.length<5?(d("Password should be at least 6 characters and match each other"),!1):(d(""),!0):(d("Email is not valid"),!1)};return Object(nt.jsx)("div",{className:"animate__animated animate__fadeIn ",children:Object(nt.jsx)(qe.a,{theme:it,children:Object(nt.jsxs)(Le.a,{component:"main",maxWidth:"xs",children:[Object(nt.jsx)(Fe.a,{}),Object(nt.jsxs)(Be.a,{sx:{marginTop:8,display:"flex",flexDirection:"column",alignItems:"center"},children:[Object(nt.jsx)(De.a,{sx:{m:1,bgcolor:"secondary.main"},children:Object(nt.jsx)(ut.a,{})}),Object(nt.jsx)(We.a,{component:"h1",variant:"h5",children:"Sign Up"}),Object(nt.jsxs)(Be.a,{component:"form",onSubmit:k,noValidate:!0,sx:{mt:3},children:[u&&Object(nt.jsx)(ze.a,{sx:{width:"100%"},spacing:2,children:Object(nt.jsx)(Re.a,{severity:"error",children:u})}),!r&&c&&Object(nt.jsx)("div",{children:Object(nt.jsx)("img",{src:"".concat(c),alt:g,className:"img-register"})}),Object(nt.jsx)($e.a,{autoComplete:"off",value:v,onChange:x,name:"email",placeholder:"Email",required:!0,fullWidth:!0,autoFocus:!0}),Object(nt.jsx)($e.a,{autoComplete:"off",value:g,onChange:x,name:"name",placeholder:"Name",required:!0,fullWidth:!0}),Object(nt.jsx)($e.a,{autoComplete:"off",type:"password",value:y,onChange:x,name:"password",placeholder:"Passsword",required:!0,fullWidth:!0}),Object(nt.jsx)($e.a,{autoComplete:"off",type:"password",value:w,onChange:x,name:"password2",placeholder:"Repeat Passsword",required:!0,fullWidth:!0}),Object(nt.jsxs)(ze.a,{direction:"row",alignItems:"left",children:[Object(nt.jsx)(Te.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return e.current.click()},children:Object(nt.jsx)(dt.a,{})}),Object(nt.jsx)("input",{onChange:C,ref:e,type:"file",style:{display:"none"}})]}),!r&&Object(nt.jsx)(Te.a,{onClick:k,startIcon:Object(nt.jsx)(Ot.a,{}),type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Sign Up"}),r&&Object(nt.jsx)(Te.a,{startIcon:Object(nt.jsx)(Ot.a,{}),type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:!0,children:"Uploading..."}),Object(nt.jsx)(Ae.a,{container:!0,children:Object(nt.jsx)(Ae.a,{item:!0,children:Object(nt.jsx)(o.b,{to:"/auth/signin",className:"link",children:"Do you have an account? Sign In"})})})]})]}),Object(nt.jsx)(at,{sx:{mt:8,mb:4}})]})})})},St=function(){return Object(nt.jsxs)(l.d,{children:[Object(nt.jsx)(l.b,{exact:!0,path:"/auth/signin",component:ot}),Object(nt.jsx)(l.b,{exact:!0,path:"/auth/signup",component:Ct}),Object(nt.jsx)(l.a,{to:"/auth/signin"})]})},It=n(18),_t=["isAuthenticated","error","component"],Nt=function(e){var t=e.isAuthenticated,n=(e.error,e.component),a=Object(It.a)(e,_t);return Object(nt.jsx)(l.b,Object($.a)(Object($.a)({},a),{},{component:function(e){return t?Object(nt.jsx)(n,Object($.a)({},e)):Object(nt.jsx)(l.a,{to:"/auth/signin"})}}))},Et=["isAuthenticated","error","component"],Mt=function(e){var t=e.isAuthenticated,n=(e.error,e.component),a=Object(It.a)(e,Et);return Object(nt.jsx)(l.b,Object($.a)(Object($.a)({},a),{},{component:function(e){return t?Object(nt.jsx)(l.a,{to:"/"}):Object(nt.jsx)(n,Object($.a)({},e))}}))},Ut=n(440),Dt=n(442),Tt=n(441),Ft=function(e){var t=e.data,n=Object(i.c)((function(e){return e.auth.user})).uid,a=Object(i.b)(),r=t.title,c=t.description,s=t.registration_date,u=t.user,j=c.substring(0,300)+"...",d=re()(s).format("lll"),b=Object(l.h)(),O=Object(l.i)().userid;return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(Be.a,{display:"flex",alignItems:"left",justifyContent:"left",children:Object(nt.jsxs)(Ut.a,{sx:{maxWidth:1e3},children:[Object(nt.jsx)("div",{className:"pointer",onClick:function(){b.pathname,a(oe()),a(ve(t)),a(se())},children:Object(nt.jsx)(Tt.a,{children:Object(nt.jsxs)(Dt.a,{children:[Object(nt.jsx)(We.a,{gutterBottom:!0,variant:"h5",children:r}),Object(nt.jsx)(We.a,{variant:"body2",color:"text.secondary",children:j})]})})}),Object(nt.jsxs)(Tt.a,{children:[Object(nt.jsx)(Be.a,{sx:{ml:2}}),O||"/mystories"===b.pathname||u._id===n?Object(nt.jsx)("span",{className:"text-off-link",children:u.name}):Object(nt.jsx)(o.b,{to:"./user/".concat(u._id,"/").concat(u.name),className:"text-link",children:u.name}),Object(nt.jsx)(Be.a,{sx:{mr:2},display:"flex",width:1e3,alignItems:"right",justifyContent:"right",children:Object(nt.jsx)(We.a,{variant:"caption",color:"text.secondary",children:d})})]})]})}),Object(nt.jsx)(Be.a,{sx:{mb:4}})]})},At=n(431),Bt=n(449),Pt=n(450),Vt=n(119),Wt=n.n(Vt),Lt=n(408),qt=n(417),Rt=n(438),zt=n(443),Gt=n(444),Yt=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return{src:"".concat(e,"?w=").concat(t*r,"&h=").concat(n*a,"&fit=crop&auto=format"),srcSet:"".concat(e,"?w=").concat(t*r,"&h=").concat(n*a,"&fit=crop&auto=format&dpr=2 2x")}},Ht=function(){var e=Object(i.c)((function(e){return e.storie.activeStorie})).urlImages;return Object(nt.jsx)(Be.a,{display:"flex",justifyContent:"center",children:Object(nt.jsx)(zt.a,{sx:{width:400,height:300,transform:"translateZ(0)"},rowHeight:150,gap:1,children:e.map((function(e,t){return Object(nt.jsx)(Gt.a,{cols:2,rows:2,children:Object(nt.jsx)("img",Object($.a)(Object($.a)({},Yt(e,200,150,2,2)),{},{alt:e,loading:"lazy"}))},t)}))})})},Jt=n(86),Xt=n.n(Jt),Kt=(n(332),function(){var e={name:"",file:""},t=Object(a.useRef)(),n=Object(a.useState)([]),r=Object(Ue.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)([]),l=Object(Ue.a)(o,2),u=l[0],j=l[1],d=Object(a.useState)(""),b=Object(Ue.a)(d,2),O=b[0],h=b[1],m=Object(a.useState)(e),p=Object(Ue.a)(m,2),f=p[0],x=p[1],v=Object(i.b)(),g=Object(i.c)((function(e){return e.storie})).images;Object(a.useEffect)((function(){var e=g.reduce((function(e,t){return e.find((function(e){return e.name===t.name}))?e:e.concat([t])}),[]);s(Object(Q.a)(e)),u.length>0?v(ke(!1)):v(ke(!0))}),[g,u,v]);var y=function(e){e.preventDefault()},w=function(e){for(var t=function(t){k(e[t])?v(we(e[t])):(e[t].invalid=!0,v(we(e[t])),h("File type not permitted"),j((function(n){return[].concat(Object(Q.a)(n),[e[t]])})))},n=0;n<e.length;n++)t(n)},k=function(e){return-1!==["image/jpeg","image/jpg","image/png","image/gif","image/x-icon","image/webp"].indexOf(e.type)},C=function(e){if(0===e)return"0 Bytes";var t=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,t)).toFixed(2))+" "+["Bytes","KB","MB","GB","TB"][t]},S=function(t){var n=c.findIndex((function(e){return e.name===t.name})),a=u.findIndex((function(e){return e.name===t.name}));c.splice(n,1),s(Object(Q.a)(c)),v(function(e){return{type:R,payload:e}}(Object(Q.a)(c))),-1!==a&&(u.splice(a,1),j(Object(Q.a)(u))),(f.name===t.name||c.length<1)&&x(e)};return Object(nt.jsx)(nt.Fragment,{children:Object(nt.jsxs)("div",{className:"container",children:[Object(nt.jsxs)("div",{className:"drop-container pointer",onDragOver:function(e){y(e)},onDragEnter:function(e){y(e)},onDragLeave:function(e){y(e)},onDrop:function(e){y(e);var t=e.dataTransfer.files;t.length&&w(t)},onClick:function(){t.current.click()},children:[Object(nt.jsxs)("div",{className:"drop-message pointer",children:[Object(nt.jsx)("div",{className:"upload-icon"}),"Drag & Drop files here or click to select file(s)"]}),Object(nt.jsx)("input",{ref:t,className:"file-input",type:"file",multiple:!0,onChange:function(){t.current.files.length&&w(t.current.files)}})]}),u.length?Object(nt.jsx)("p",{children:"Please remove all unsupported files."}):"",c.map((function(e,t){return Object(nt.jsxs)("div",{className:"file-status-bar",children:[Object(nt.jsxs)("div",{className:"pointer",onClick:e.invalid?function(){return S(e.name)}:function(){return function(e){var t=new FileReader;t.readAsDataURL(e),t.onload=function(t){x({name:e.name,file:t.target.result})}}(e)},children:[Object(nt.jsx)("div",{className:"file-type-logo"}),Object(nt.jsx)("div",{className:"file-type",children:(n=e.name,n.substring(n.lastIndexOf(".")+1,n.length)||n)}),Object(nt.jsx)("span",{className:"file-name ".concat(e.invalid?"file-error":""),children:e.name.substring(0,6)+".."}),Object(nt.jsxs)("span",{className:"file-size",children:["(",C(e.size),")"]})," ",e.invalid&&Object(nt.jsxs)("span",{className:"file-error-message",children:["(",O,")"]})]}),Object(nt.jsx)("div",{className:"file-remove",onClick:function(){return S(e)},children:Object(nt.jsx)(Xt.a,{})})]},t);var n})),c.length>0&&f.file&&Object(nt.jsx)("div",{children:Object(nt.jsx)("img",{src:"".concat(f.file),alt:f.file,className:"img-storie"})})]})})}),Zt=n(423),Qt=n(446),$t=n(445),en=function(e){var t=e.urlImage,n=Object(i.b)();return Object(nt.jsx)(nt.Fragment,{children:Object(nt.jsxs)(Zt.a,{alignItems:"flex-start",children:[Object(nt.jsx)($t.a,{children:Object(nt.jsx)(De.a,{alt:"Remy Sharp",src:t})}),Object(nt.jsx)(Qt.a,{primary:Object(nt.jsx)("div",{className:"img-align pointer",children:Object(nt.jsx)(Xt.a,{onClick:function(){n(function(e){return{type:Y,payload:e}}(t))}})})})]})})},tn=Object(st.a)(),nn=function(e){var t=e.formValues,n=e.setFormValues,a=e.error,r=t.description,c=t.title,s=t.registration_date,o=t.user,l=t.urlImages,u=re()(s).format("lll"),j=Object(i.c)((function(e){return e.ui})).modalViewModel,d=Object(i.c)((function(e){return e.storie})).activeStorie,b=function(e){var a=e.target;n(Object($.a)(Object($.a)({},t),{},Object(rt.a)({},a.name,a.value)))};return Object(nt.jsx)(qe.a,{theme:tn,children:Object(nt.jsxs)(Le.a,{component:"main",children:[Object(nt.jsx)(Fe.a,{}),Object(nt.jsx)(Be.a,{sx:{marginTop:11,flexDirection:"column",alignItems:"center"},children:j?Object(nt.jsx)(Be.a,{display:"flex",justifyContent:"center",children:Object(nt.jsxs)(Ut.a,{sx:{maxWidth:1e3},children:[Object(nt.jsxs)(Tt.a,{children:[Object(nt.jsx)(Be.a,{sx:{ml:2},display:"flex",width:890,alignItems:"left",justifyContent:"left",children:Object(nt.jsxs)(We.a,{variant:"body1",color:"text.secondary",children:["Author: ",o.name]})}),Object(nt.jsx)(Be.a,{sx:{mr:2},display:"flex",width:890,alignItems:"right",justifyContent:"right",children:Object(nt.jsxs)(We.a,{variant:"caption",color:"text.secondary",children:["Published on ",u]})})]}),l.length>0&&Object(nt.jsx)(Ht,{}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)(Dt.a,{children:Object(nt.jsx)(We.a,{variant:"p",children:r})})})]})}):Object(nt.jsxs)("div",{children:[Object(nt.jsx)(Rt.a,{sx:{width:"100%",maxWidth:500,bgcolor:"background.paper"},children:d&&d.urlImages.map((function(e){return Object(nt.jsx)(en,{urlImage:e},e)}))}),Object(nt.jsxs)(Be.a,{component:"form",justifyContent:"center",children:[a&&Object(nt.jsx)(ze.a,{sx:{width:"100%"},spacing:2,children:Object(nt.jsx)(Re.a,{severity:"error",children:a})}),Object(nt.jsx)(qt.a,{margin:"normal",required:!0,fullWidth:!0,name:"title",label:"Title",type:"text",autoComplete:"off",value:c,onChange:b}),Object(nt.jsx)(qt.a,{required:!0,margin:"normal",fullWidth:!0,name:"description",label:"Description",type:"text",multiline:!0,rows:15,autoComplete:"off",value:r,onChange:b}),Object(nt.jsx)(Kt,{})]})]})})]})})},an=n(405),rn=function(){var e=Object(i.b)();return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)("div",{id:"custom-target"}),Object(nt.jsx)("div",{className:"fab-delete",onClick:function(){j.a.fire({title:"Are you sure?",text:"You won't be able to revert this!",icon:"warning",showCancelButton:!0,showConfirmButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Yes, delete it!",target:"#custom-target",toast:!0}).then((function(t){t.isConfirmed&&(e(function(){var e=Object(O.a)(b.a.mark((function e(t,n){var a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=n().storie.activeStorie._id,e.prev=1,e.next=4,p("stories/".concat(a),{},"DELETE");case 4:return r=e.sent,e.next=7,r.json();case 7:(c=e.sent).ok?(t(xe()),j.a.fire("Deleted!","Your storie has been deleted.","success")):j.a.fire("Error",c.msg,"error"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t,n){return e.apply(this,arguments)}}()),e(ie()))}))},children:Object(nt.jsx)(an.a,{color:"primary","aria-label":"add",children:Object(nt.jsx)(Xt.a,{})})})]})},cn=n(187),sn=n.n(cn),on=function(){var e=Object(i.b)();return Object(nt.jsx)("div",{className:"fab",onClick:function(){e(le())},children:Object(nt.jsx)(an.a,{color:"primary","aria-label":"add",children:Object(nt.jsx)(sn.a,{})})})},ln=n(188),un=n.n(ln),jn=function(){var e=Object(i.b)();return Object(nt.jsx)("div",{className:"fab",onClick:function(){e(oe())},children:Object(nt.jsx)(an.a,{color:"primary","aria-label":"add",children:Object(nt.jsx)(un.a,{})})})},dn=n(430),bn=n(448),On=function(){var e=Object(i.c)((function(e){return e.ui})).showLoading;return Object(nt.jsx)("div",{children:Object(nt.jsx)(dn.a,{sx:{color:"#fff",zIndex:function(e){return e.zIndex.drawer+1}},open:e,children:Object(nt.jsx)(bn.a,{color:"inherit"})})})},hn=n(424),mn=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.ui})).showMessage,n=t.open,a=t.message,r=t.error,c=function(t,n){"clickaway"!==n&&e({type:S})};return Object(nt.jsxs)("div",{children:[!r&&Object(nt.jsx)(ze.a,{spacing:2,sx:{width:"100%"},children:Object(nt.jsx)(hn.a,{open:n,autoHideDuration:6e3,onClose:c,children:Object(nt.jsx)(Re.a,{onClose:c,severity:"success",sx:{width:"100%"},children:a})})}),r&&Object(nt.jsx)(ze.a,{spacing:2,sx:{width:"100%"},children:Object(nt.jsx)(hn.a,{open:n,autoHideDuration:6e3,onClose:c,children:Object(nt.jsx)(Re.a,{onClose:c,severity:"error",sx:{width:"100%"},children:a})})})]})},pn={title:"",description:"",registration_date:re()().toDate()},fn=r.a.forwardRef((function(e,t){return Object(nt.jsx)(Lt.a,Object($.a)({direction:"up",ref:t},e))})),xn=function(){var e=Object(a.useState)(""),t=Object(Ue.a)(e,2),n=t[0],r=t[1],c=Object(i.c)((function(e){return e.ui})),s=c.storieModalOpen,o=c.modalViewModel,l=Object(i.c)((function(e){return e.storie})),u=l.activeStorie,j=l.images,d=l.isValidImages,h=Object(i.c)((function(e){return e.auth.user})).uid,m=Object(i.b)(),p=Object(a.useState)(pn),f=Object(Ue.a)(p,2),x=f[0],v=f[1],g=x.description,y=x.title;Object(a.useEffect)((function(){v(u||pn)}),[u,v]);var w=function(){var e=Object(O.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),d){e.next=4;break}return m(de("You must select valid image format!.")),e.abrupt("return");case 4:if(!k()){e.next=17;break}if(m(be(!0)),!u){e.next=13;break}return x.urlImages=u.urlImages,x.registration_date=re()().toDate(),e.next=11,m(pe(x,j));case 11:e.next=15;break;case 13:return e.next=15,m(Oe(x,j));case 15:C(),m(be(!1));case 17:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(){return 0===y.trim().length?(r("Title is required"),!1):0===g.trim().length?(r("Description is required"),!1):(r(""),!0)},C=function(){m(ie()),m({type:P}),v(pn),m(le()),m(me())},S=function(){C()};return Object(nt.jsxs)(At.a,{disableEnforceFocus:!0,fullScreen:!0,open:s,onClose:S,TransitionComponent:fn,children:[Object(nt.jsx)(qe.a,{theme:it,children:Object(nt.jsx)(Bt.a,{color:"primary",sx:{position:"fixed"},children:Object(nt.jsxs)(Pt.a,{children:[Object(nt.jsx)(He.a,{edge:"start",color:"inherit",onClick:S,"aria-label":"close",children:Object(nt.jsx)(Wt.a,{})}),o?Object(nt.jsx)(We.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:y}):Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(We.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:u?"Edit storie":"New storie"}),Object(nt.jsx)(Te.a,{autoFocus:!0,color:"inherit",onClick:w,children:"save"})]})]})})}),Object(nt.jsx)(nn,{formValues:x,setFormValues:v,error:n}),Object(nt.jsx)(On,{}),Object(nt.jsx)(mn,{}),u&&!o&&Object(nt.jsx)(rn,{}),u&&o&&u.user._id===h&&Object(nt.jsx)(on,{}),u&&!o&&Object(nt.jsx)(jn,{})]})},vn=n(189),gn=n.n(vn),yn=function(){var e=Object(i.b)();return Object(nt.jsx)("div",{className:"fab",onClick:function(){e(se())},children:Object(nt.jsx)(an.a,{color:"primary","aria-label":"add",children:Object(nt.jsx)(gn.a,{})})})},wn=function(){var e=Object(i.c)((function(e){return e.storie})).stories,t=Object(i.b)();return Object(a.useEffect)((function(){t(ge())}),[t]),Object(nt.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[e.map((function(e){return Object(nt.jsx)(Ft,{data:e},e._id)})),Object(nt.jsx)(yn,{}),Object(nt.jsx)(xn,{}),Object(nt.jsx)(mn,{})]})},kn=n(21),Cn=n(414),Sn=n(415),In=n(123),_n=n(191),Nn=n.n(_n),En=n(411),Mn=n(413),Un=n(181),Dn=n(348),Tn=n(412),Fn=n(452),An=n(192),Bn=n.n(An),Pn=n(410),Vn=n(87),Wn=n(61),Ln=n(66),qn=n(195),Rn=n(194),zn=n(418),Gn=n(409),Yn=n(190),Hn=n.n(Yn),Jn=function(e){Object(qn.a)(n,e);var t=Object(Rn.a)(n);function n(e){var a;return Object(Vn.a)(this,n),(a=t.call(this,e)).handleMenu=function(e){a.setState({anchorEl:e.currentTarget})},a.handleClose=function(){a.setState({anchorEl:null})},a.state={anchorEl:null},a.handleMenu=a.handleMenu.bind(Object(Ln.a)(a)),a}return Object(Wn.a)(n,[{key:"render",value:function(){var e=this.props.classes,t=this.state.anchorEl,n=Boolean(t);return Object(nt.jsxs)("div",{className:e.buttonCollapse,children:[Object(nt.jsx)(Gn.a,{onClick:this.handleMenu,children:Object(nt.jsx)(Hn.a,{})}),Object(nt.jsx)(zn.a,{id:"menu-appbar",anchorEl:t,anchorOrigin:{vertical:"top",horizontal:"right"},transformOrigin:{vertical:"top",horizontal:"right"},open:n,onClose:this.handleClose,children:this.props.children})]})}}]),n}(r.a.Component),Xn=Object(kn.a)((function(e){var t;return{buttonCollapse:(t={},Object(rt.a)(t,e.breakpoints.up("sm"),{display:"none"}),Object(rt.a)(t,"margin","10px"),Object(rt.a)(t,"boxShadow","none"),t)}}))(Jn),Kn=n(451),Zn=n(447),Qn=n(401),$n=n(432),ea=n(102),ta=n.n(ea),na=n(419),aa=function(){var e={password:"",newPassword:""},t=Object(i.b)(),n=Object(a.useState)(""),r=Object(Ue.a)(n,2),c=r[0],s=r[1],o=Object(a.useState)(e),l=Object(Ue.a)(o,2),u=l[0],j=l[1],d=u.password,h=u.newPassword,m=function(e){var t=e.target;j(Object($.a)(Object($.a)({},u),{},Object(rt.a)({},t.name,t.value)))},p=function(){var n=Object(O.a)(b.a.mark((function n(a){return b.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a.preventDefault(),!f()){n.next=5;break}return t(be(!0)),n.next=5,t(ft(u));case 5:j(e),t(be(!1));case 7:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}(),f=function(){return h.length<6||d.length<6?(s("Password should be at least 6 characters"),!1):(s(""),!0)};return Object(nt.jsxs)(Be.a,{className:"animate__animated animate__fadeIn",component:"form",sx:{marginTop:3},children:[Object(nt.jsx)("hr",{}),c&&Object(nt.jsx)(ze.a,{sx:{width:"100%"},spacing:2,children:Object(nt.jsx)(Re.a,{severity:"error",children:c})}),Object(nt.jsx)("h3",{children:"Update Your Password"}),Object(nt.jsx)(qt.a,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:"Previous Password",type:"password",autoComplete:"off",value:d,onChange:m}),Object(nt.jsx)(qt.a,{margin:"normal",required:!0,fullWidth:!0,name:"newPassword",label:"New Password",type:"password",autoComplete:"off",value:h,onChange:m}),Object(nt.jsx)(Te.a,{onClick:p,startIcon:Object(nt.jsx)(ta.a,{}),type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save"}),Object(nt.jsx)(On,{})]})},ra=function(e){var t=e.formValues,n=e.setFormValues,r=t.name,c=t.urlimage,s=t.rol,o=t.uid,l=Object(i.b)(),u=Object(a.useRef)(),j=Object(a.useState)(""),d=Object(Ue.a)(j,2),h=d[0],m=d[1],p=Object(i.c)((function(e){return e.user})),f=p.uploadedImage,x=p.activeUser,v=Object(i.c)((function(e){return e.auth.user})),g=v.uid,y=v.rol,w=function(){var e=Object(O.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:l(gt()),(n=t.target.files[0])&&l(xt(n,r));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),k=function(e){var a=e.target;n(Object($.a)(Object($.a)({},t),{},Object(rt.a)({},a.name,a.value)))},C=function(){var e=Object(O.a)(b.a.mark((function e(n){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),!S()){e.next=13;break}if(l(be(!0)),g===o){e.next=9;break}return e.next=6,l(Ee(t));case 6:l(wt(t)),e.next=12;break;case 9:return e.next=11,l(Ee(t,!0));case 11:l(wt(t));case 12:l(be(!1));case 13:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),S=function(){return 0===r.trim().length?(m("Name is required"),!1):(m(""),!0)};return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(On,{}),Object(nt.jsxs)(Be.a,{className:"animate__animated animate__fadeIn",component:"form",sx:{marginBottom:3},children:[h&&Object(nt.jsx)(ze.a,{sx:{width:"100%"},spacing:2,children:Object(nt.jsx)(Re.a,{severity:"error",children:h})}),o!==g?Object(nt.jsxs)("h3",{align:"center",children:["Update ",x.name," User Information"]}):Object(nt.jsx)("h3",{align:"center",children:"Update Your User Information"}),Object(nt.jsx)("div",{children:Object(nt.jsx)("img",{src:"".concat(c),alt:r,className:"img-register"})}),Object(nt.jsx)(qt.a,{margin:"normal",required:!0,fullWidth:!0,name:"name",label:"Name",type:"text",autoComplete:"off",value:r||"",onChange:k}),("ADMIN"===y&&g===o||"ADMIN"===y&&"USER"===x.rol)&&Object(nt.jsx)(Be.a,{sx:{marginBottom:2,marginTop:2},children:Object(nt.jsxs)(Zn.a,{component:"fieldset",children:[Object(nt.jsx)(Qn.a,{component:"legend",sx:{marginBottom:1},children:"User Type"}),Object(nt.jsxs)($n.a,{row:!0,"aria-label":"rol",name:"rol",value:s||"",onChange:k,children:[Object(nt.jsx)(Kn.a,{value:"ADMIN",control:Object(nt.jsx)(na.a,{}),label:"ADMIN"}),Object(nt.jsx)(Kn.a,{value:"USER",control:Object(nt.jsx)(na.a,{}),label:"USER"})]})]})}),Object(nt.jsxs)(ze.a,{direction:"row",alignItems:"left",children:[Object(nt.jsx)(Te.a,{color:"primary","aria-label":"upload picture",component:"span",onClick:function(){return u.current.click()},children:Object(nt.jsx)(dt.a,{})}),Object(nt.jsx)("input",{onChange:w,ref:u,type:"file",style:{display:"none"}})]}),!f&&Object(nt.jsx)(Te.a,{onClick:C,startIcon:Object(nt.jsx)(ta.a,{}),type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:"Save"}),f&&Object(nt.jsx)(Te.a,{startIcon:Object(nt.jsx)(ta.a,{}),fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},disabled:!0,children:"Uploading..."})]}),o===g&&Object(nt.jsx)(aa,{})]})},ca=function(){var e=Object(i.c)((function(e){return e.user.activeUser})),t=e.email,n=e.name,a=e.urlimage,r=e.rol;return Object(nt.jsx)(Be.a,{className:"animate__animated animate__fadeIn ",display:"flex",justifyContent:"center",children:Object(nt.jsxs)(Ut.a,{sx:{maxWidth:1e3},children:[Object(nt.jsx)("div",{children:Object(nt.jsx)("img",{src:"".concat(a),alt:n,className:"img-register"})}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)(Be.a,{sx:{ml:2},display:"flex",width:890,alignItems:"left",justifyContent:"left",children:Object(nt.jsxs)(We.a,{variant:"body1",color:"text.secondary",children:["Email: ",t]})})}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)(Be.a,{sx:{ml:2},display:"flex",width:890,alignItems:"left",justifyContent:"left",children:Object(nt.jsxs)(We.a,{variant:"body1",color:"text.secondary",children:["Name: ",n]})})}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)(Be.a,{sx:{ml:2},display:"flex",width:890,alignItems:"left",justifyContent:"left",children:Object(nt.jsxs)(We.a,{variant:"body1",color:"text.secondary",children:["Rol: ",r]})})}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)(Be.a,{sx:{ml:2},display:"flex",width:890,alignItems:"left",justifyContent:"left"})})]})})},sa=function(e){var t=e.formValues,n=e.setFormValues,a=Object(i.c)((function(e){return e.ui})).modalViewModel;return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(mn,{}),Object(nt.jsx)(qe.a,{theme:it,children:Object(nt.jsxs)(Le.a,{component:"main",maxWidth:"sm",children:[Object(nt.jsx)(Fe.a,{}),Object(nt.jsx)(Be.a,{sx:{marginBottom:5,marginTop:13,flexDirection:"column",alignItems:"center"},children:a?Object(nt.jsx)(ca,{}):Object(nt.jsx)(ra,{formValues:t,setFormValues:n})})]})})]})},ia={email:"",name:"",urlimage:""},oa=Object(a.forwardRef)((function(e,t){return Object(nt.jsx)(Lt.a,Object($.a)({direction:"up",ref:t},e))})),la=function(){var e=Object(i.c)((function(e){return e.ui})),t=e.userModalOpen,n=e.modalViewModel,r=Object(i.c)((function(e){return e.user})).activeUser,c=Object(i.c)((function(e){return e.auth.user})),s=c.uid,o=c.rol,l=Object(i.b)(),u=Object(a.useState)(ia),j=Object(Ue.a)(u,2),d=j[0],b=j[1],O=d.name;Object(a.useEffect)((function(){b(r||ia)}),[r,b]);var h=function(){l({type:x}),l(pt()),b(ia),l(le())};return Object(nt.jsxs)(At.a,{disableEnforceFocus:!0,fullScreen:!0,open:t,onClose:h,TransitionComponent:oa,children:[Object(nt.jsx)(qe.a,{theme:it,children:Object(nt.jsx)(Bt.a,{color:"primary",sx:{position:"fixed"},children:Object(nt.jsxs)(Pt.a,{children:[Object(nt.jsx)(He.a,{edge:"start",color:"inherit",onClick:h,"aria-label":"close",children:Object(nt.jsx)(Wt.a,{})}),n?Object(nt.jsx)(nt.Fragment,{children:Object(nt.jsx)(We.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"".concat(O)})}):Object(nt.jsx)(We.a,{sx:{ml:2,flex:1},variant:"h6",component:"div",children:"Edit User Information"})]})})}),Object(nt.jsx)(sa,{formValues:d,setFormValues:b}),(n&&r.uid===s||n&&"ADMIN"===o&&"USER"===r.rol)&&Object(nt.jsx)(on,{}),r&&!n&&Object(nt.jsx)(jn,{})]})},ua=Object(Pn.a)((function(){return{active:{background:"#384AA9"},activeButton:{background:"#ECECEC"}}})),ja=Object(kn.a)((function(e){var t;return{_root:{position:"absolute",left:80},root:{position:"absolute",right:0},buttonBar:(t={},Object(rt.a)(t,e.breakpoints.down("xs"),{display:"none"}),Object(rt.a)(t,"margin","10px"),Object(rt.a)(t,"paddingLeft","16px"),Object(rt.a)(t,"right",0),Object(rt.a)(t,"position","relative"),Object(rt.a)(t,"width","100%"),Object(rt.a)(t,"background","transparent"),t)}}))((function(e){var t=Object(i.c)((function(e){return e.auth.user})).rol,n=ua(),a=Object(l.g)(),r=Object(l.h)(),c=Object(i.b)(),s=function(){c(_e())},o=function(){c(ht()),c(oe()),c(ue())};return Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsxs)("div",{className:e.classes._root,children:[Object(nt.jsx)(Xn,{children:Object(nt.jsxs)(En.a,{children:[Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/stories")},className:"/stories"===r.pathname?n.activeButton:null,children:Object(nt.jsx)(Tn.a,{primary:"Stories"})},"Stories"),Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/mystories")},className:"/mystories"===r.pathname?n.activeButton:null,children:Object(nt.jsx)(Tn.a,{primary:"My_Stories"})},"My_Stories"),"ADMIN"===t&&Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/users")},className:"/users"===r.pathname?n.activeButton:null,children:Object(nt.jsx)(Tn.a,{primary:"users"})},"Users")]})}),Object(nt.jsx)("div",{className:e.classes.buttonBar,id:"appbar-collapse",children:Object(nt.jsxs)(Mn.a,{color:"inherit",children:[Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/stories")},className:"/stories"===r.pathname?n.active:null,children:Object(nt.jsx)(Tn.a,{primary:"Stories"})},"Stories"),Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/mystories")},className:"/mystories"===r.pathname?n.active:null,children:Object(nt.jsx)(Tn.a,{primary:"My_Stories"})},"My_Stories"),"ADMIN"===t&&Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return a.push("/users")},className:"/users"===r.pathname?n.active:null,children:Object(nt.jsx)(Tn.a,{primary:"Users"})},"Users")]})})]}),Object(nt.jsxs)("div",{className:e.classes.root,children:[Object(nt.jsx)(Xn,{children:Object(nt.jsxs)(En.a,{children:[Object(nt.jsx)(Dn.a,{button:!0,onClick:o,children:Object(nt.jsx)(Tn.a,{primary:"My info"})},"UserInfo"),Object(nt.jsx)(Dn.a,{button:!0,onClick:s,children:Object(nt.jsx)(Tn.a,{primary:"Logout"})},"Logout")]})}),Object(nt.jsx)("div",{className:e.classes.buttonBar,id:"appbar-collapse",children:Object(nt.jsxs)(Mn.a,{color:"inherit",children:[Object(nt.jsx)(Dn.a,{button:!0,onClick:o,children:Object(nt.jsx)(Fn.a,{children:Object(nt.jsx)(Nn.a,{sx:{color:Un.a[50]}})})},"UserInfo"),Object(nt.jsx)(Dn.a,{button:!0,onClick:s,children:Object(nt.jsx)(Fn.a,{children:Object(nt.jsx)(Bn.a,{sx:{color:Un.a[50]}})})},"Logout")]})})]}),Object(nt.jsx)(la,{})]})}));var da=Object(kn.a)({root:{flexGrow:1},grow:{flexGrow:1},menuButton:{marginLeft:-12,marginRight:20},navigation:{},toggleDrawer:{},appTitle:{position:"absolute",width:150,marginLeft:30}})((function(e){var t=e.classes,n=Object(l.g)();return Object(nt.jsx)(Cn.a,{position:"relative",className:t.navigation,children:Object(nt.jsxs)(Sn.a,{children:[Object(nt.jsx)(Mn.a,{color:"inherit",children:Object(nt.jsx)(Dn.a,{button:!0,onClick:function(){return n.push("/")},className:t.appTitle,children:Object(nt.jsx)(In.a,{variant:"h5",color:"inherit",children:"My App"})},"Main")}),Object(nt.jsx)(ja,{})]})})})),ba=function(){var e=Object(i.c)((function(e){return e.storie})).stories,t=Object(i.c)((function(e){return e.auth.user})).uid,n=Object(i.b)();return Object(a.useEffect)((function(){n(ge())}),[n]),Object(nt.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[e.map((function(e){return e.user._id===t&&Object(nt.jsx)(Ft,{data:e},e._id)})),Object(nt.jsx)(xn,{}),Object(nt.jsx)(mn,{})]})},Oa=n(416),ha=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.storie})).stories,n=Object(l.i)(),r=n.userid,c=n.username;return Object(a.useEffect)((function(){e(ge())}),[e]),Object(nt.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(nt.jsxs)("h1",{children:["Historias de ",c]}),Object(nt.jsx)("hr",{}),Object(nt.jsx)(Tt.a,{children:Object(nt.jsx)("div",{className:"text-link pointer",onClick:function(){e(ht(r)),e(oe()),e(ue())},children:"View profile"})}),t.map((function(e){return e.user._id===r&&Object(nt.jsx)(Ft,{data:e},e._id)})),Object(nt.jsx)(xn,{}),Object(nt.jsx)(la,{})]})},ma=function(e){var t=e.data;return Object(nt.jsxs)(Zt.a,{alignItems:"flex-start",children:[Object(nt.jsx)($t.a,{children:Object(nt.jsx)(De.a,{alt:"Remy Sharp",src:t.urlimage})}),Object(nt.jsx)(Qt.a,{className:"text-name-card ",primary:Object(nt.jsx)(o.b,{to:"./user/".concat(t.uid,"/").concat(t.name),className:"text-link",children:t.name}),secondary:Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(We.a,{sx:{display:"inline"},component:"span",variant:"body2",color:"text.primary",children:t.email})," - ".concat(t.rol)]})})]})},pa=function(){var e=Object(i.c)((function(e){return e.user})).users,t=Object(i.b)();return Object(a.useEffect)((function(){t(function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a,r,c;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("user");case 3:return n=e.sent,e.next=6,n.json();case 6:a=e.sent,r=a.users,c="",r=r.map((function(e){return c=e._id,delete e._id,Object($.a)({uid:c},e)})),t(kt(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),j.a.fire("Error","There was an error connecting to the server","error");case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}())}),[t]),Object(nt.jsx)("div",{className:"animate__animated animate__fadeIn",children:Object(nt.jsx)(Rt.a,{sx:{width:"100%",maxWidth:500,bgcolor:"background.paper"},children:e.map((function(e){return Object(nt.jsx)(ma,{data:e},e.uid)}))})})},fa=function(){var e=Object(i.c)((function(e){return e.auth.user})).rol;return Object(nt.jsx)(nt.Fragment,{children:Object(nt.jsxs)("div",{className:"animate__animated animate__fadeIn",children:[Object(nt.jsx)(da,{}),Object(nt.jsx)(Oa.a,{sx:{mt:6}}),Object(nt.jsx)(Fe.a,{}),Object(nt.jsx)(Le.a,{fixed:!0,children:Object(nt.jsxs)(l.d,{children:[Object(nt.jsx)(l.b,{exact:!0,path:"/",component:wn}),Object(nt.jsx)(l.b,{exact:!0,path:"/user/:userid/:username",component:ha}),Object(nt.jsx)(l.b,{exact:!0,path:"/mystories",component:ba}),"ADMIN"===e&&Object(nt.jsx)(l.b,{exact:!0,path:"/users",component:pa}),Object(nt.jsx)(l.a,{to:"/"})]})})]})})},xa=function(){return Object(nt.jsx)("div",{children:Object(nt.jsx)("h1",{children:"Service Unavailable"})})},va=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.auth})),n=t.checking,r=t.user,c=t.serverError;return Object(a.useEffect)((function(){e(function(){var e=Object(O.a)(b.a.mark((function e(t){var n,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p("auth/renew");case 3:return n=e.sent,e.next=6,n.json();case 6:(a=e.sent).ok?(localStorage.setItem("token",a.token),localStorage.setItem("token-init-date",(new Date).getTime()),t(Se({uid:a.uid,name:a.name,email:a.email,urlimage:a.urlimage,rol:a.rol}))):t(Ie()),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),j.a.close(),t(Ie()),t(Ce());case 15:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}())}),[e]),n?(j.a.fire({text:"Wait...",showConfirmButton:!1,allowOutsideClick:!1}),j.a.showLoading(),Object(nt.jsx)("div",{})):(j.a.close(),Object(nt.jsx)(o.a,{children:Object(nt.jsx)(l.d,{children:c?Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(l.b,{exact:!0,path:"/error",component:xa}),Object(nt.jsx)(l.a,{to:"/error"})]}):Object(nt.jsxs)(nt.Fragment,{children:[Object(nt.jsx)(Mt,{component:St,isAuthenticated:!!r.uid,path:"/auth"}),Object(nt.jsx)(Nt,{component:fa,isAuthenticated:!!r.uid,path:"/"}),!c&&Object(nt.jsx)(l.a,{to:"/auth/signin"}),Object(nt.jsx)(l.a,{to:"/auth/signin"})]})})}))},ga=n(90),ya=n(193),wa={checking:!0,serverError:!1,user:{}},ka={stories:[],activeStorie:null,images:[],isValidImages:!0},Ca={storieModalOpen:!1,userModalOpen:!1,modalViewModel:!1,showMessage:{open:!1,message:"",error:!1},showLoading:!1},Sa={activeUser:{},users:[],uploadedImage:!1},Ia=Object(ga.b)({auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case J:return Object($.a)(Object($.a)({},e),{},{user:t.payload,checking:!1});case H:return Object($.a)(Object($.a)({},e),{},{checking:!1});case X:return{user:{},checking:!1};case K:return Object($.a)(Object($.a)({},e),{},{serverError:!0});case Z:return Object($.a)(Object($.a)({},e),{},{user:t.payload});default:return e}},storie:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ka,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case F:return Object($.a)(Object($.a)({},e),{},{activeStorie:t.payload});case B:return Object($.a)(Object($.a)({},e),{},{stories:[t.payload].concat(Object(Q.a)(e.stories))});case V:return Object($.a)(Object($.a)({},e),{},{stories:e.stories.map((function(e){return e._id===t.payload._id?t.payload:e}))});case W:return Object($.a)(Object($.a)({},e),{},{stories:e.stories.filter((function(t){return t._id!==e.activeStorie._id})),activeStorie:null});case P:return Object($.a)(Object($.a)({},e),{},{activeStorie:null});case L:return Object($.a)(Object($.a)({},e),{},{stories:Object(Q.a)(t.payload)});case A:return Object($.a)({},ka);case q:return Object($.a)(Object($.a)({},e),{},{images:[].concat(Object(Q.a)(e.images),[t.payload])});case R:return Object($.a)(Object($.a)({},e),{},{images:t.payload});case z:return Object($.a)(Object($.a)({},e),{},{isValidImages:t.payload});case G:return Object($.a)(Object($.a)({},e),{},{images:[]});case Y:return Object($.a)(Object($.a)({},e),{},{activeStorie:Object($.a)(Object($.a)({},e.activeStorie),{},{urlImages:e.activeStorie.urlImages.filter((function(e){return e!==t.payload}))})});default:return e}},ui:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ca,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object($.a)(Object($.a)({},e),{},{storieModalOpen:!0});case g:return Object($.a)(Object($.a)({},e),{},{storieModalOpen:!1});case f:return Object($.a)(Object($.a)({},e),{},{userModalOpen:!0});case x:return Object($.a)(Object($.a)({},e),{},{userModalOpen:!1});case y:return Object($.a)(Object($.a)({},e),{},{modalViewModel:!0});case w:return Object($.a)(Object($.a)({},e),{},{modalViewModel:!1});case k:return Object($.a)(Object($.a)({},e),{},{showMessage:Object($.a)(Object($.a)({},e.showMessage),{},{open:!0,message:t.payload,error:!1})});case C:return Object($.a)(Object($.a)({},e),{},{showMessage:{open:!0,message:t.payload,error:!0}});case S:return Object($.a)(Object($.a)({},e),{},{showMessage:Object($.a)(Object($.a)({},e.showMessage),{},{open:!1})});case I:return Object($.a)(Object($.a)({},e),{},{showLoading:t.payload});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Sa,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case _:return Object($.a)(Object($.a)({},e),{},{activeUser:t.payload});case N:return Object($.a)(Object($.a)({},e),{},{activeUser:{}});case E:return Object($.a)(Object($.a)({},e),{},{activeUser:Object($.a)(Object($.a)({},e.activeUser),t.payload)});case M:return Object($.a)(Object($.a)({},e),{},{uploadedImage:!0});case U:return Object($.a)(Object($.a)({},e),{},{uploadedImage:!1});case D:return Object($.a)(Object($.a)({},e),{},{activeUser:t.payload,users:e.users.map((function(e){return e.uid!==t.payload.uid?e:t.payload}))});case T:return Object($.a)(Object($.a)({},e),{},{users:Object(Q.a)(t.payload)});default:return e}}}),_a="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ga.c,Na=Object(ga.d)(Ia,_a(Object(ga.a)(ya.a))),Ea=function(){return Object(nt.jsx)(i.a,{store:Na,children:Object(nt.jsx)(va,{})})};n(333);s.a.render(Object(nt.jsx)(Ea,{}),document.getElementById("root"))}},[[334,1,2]]]);
//# sourceMappingURL=main.e88d4cfc.chunk.js.map